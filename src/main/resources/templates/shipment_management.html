<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Main Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link href="https://cdn.datatables.net/v/dt/dt-2.0.8/datatables.min.css" rel="stylesheet">
    <style>
        .center-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            width: 100%;
        }

        /* 특정 테이블에만 스타일 적용 */
        .custom-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 18px;
            text-align: center;
        }

        .custom-table th,
        .custom-table td {
            border: 1px solid #000;
            padding: 8px;
            text-align: center;
            vertical-align: middle;
        }

        .custom-table th {
            background-color: #f2f2f2;
        }

        /* 모든 테이블에 테두리 설정 */
        .table-bordered th,
        .table-bordered td {
            border: 1px solid #000;
        }

    </style>
</head>

<body>
<!-- 공통 헤더 포함 -->
<header th:replace="header :: header"></header>

<div class="container">
    <!-- 제목을 포함하는 그리드 -->
    <div class="row">
        <div class="col">
            <h1 class="text-center mt-5 mb-4">출하 목록</h1>
        </div>
    </div>


    <!-- 본문 내용 -->
    <div class="row">
        <div class="col">
            <table id="example" class="table table-bordered display custom-table" style="width:100%">
                <thead>
                <tr>
                    <th>수주 번호</th>
                    <th>제품명</th>
                    <th>수량(box)</th>
                    <th>회사명</th>
                    <th>배송지</th>
                    <th>출하 예정 날짜</th>
                    <th>출하</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>123123123</td>
                    <td>Tiger Nixon</td>
                    <td>System Architect</td>
                    <td>Edinburgh</td>
                    <td>61</td>
                    <td>System Architect</td>
                    <td><button class="btn-ship">출하</button></td>
                </tr>
                <tr>
                    <td>11111111111</td>
                    <td>John Doe</td>
                    <td>Developer</td>
                    <td>New York</td>
                    <td>42</td>
                    <td>Developer</td>
                    <td><button class="btn-ship">출하</button></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Jane Smith</td>
                    <td>Designer</td>
                    <td>Los Angeles</td>
                    <td>31</td>
                    <td>Designer</td>
                    <td><button class="btn-ship">출하</button></td>
                </tr>
                <!-- 다른 행들도 필요에 따라 추가 -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="container">
    <!-- 제목을 포함하는 그리드 -->
    <div class="row">
        <div class="col">
            <h1 class="text-center mt-5 mb-4">출하 이력</h1>
        </div>
    </div>

    <!-- 본문 내용2 -->
    <div class="row">
        <div class="col">
            <table id="example2" class="table table-bordered display custom-table" style="width:100%">
                <thead>
                <tr>
                    <th>수주 번호</th>
                    <th>제품명</th>
                    <th>수량(box)</th>
                    <th>회사명</th>
                    <th>배송지</th>
                    <th>출하 예정 날짜</th>
                    <th>출하 날짜</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>1232</td>
                    <td>Jane Smith</td>
                    <td>Designer</td>
                    <td>Los Angeles</td>
                    <td>31</td>
                    <td>Designer</td>
                    <td>출하</td>
                </tr>
                <!-- 여기에 출하 이력이 추가될 예정 -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/2.0.8/js/dataTables.js"></script>
<script>
    $(document).ready(function() {
        var tableIds = ['#example', '#example2'];

        $.each(tableIds, function(index, tableId) {
            $(tableId).DataTable({
                paging: false,
                lengthChange: false,
                searching: false,
                select: false,
                info: false
            });
        });

        // 출하 버튼 클릭 이벤트 처리
        $('.btn-ship').click(function() {
            var $row = $(this).closest('tr'); // 클릭된 버튼의 부모 행을 선택합니다.
            var rowData = $row.find('td').map(function() {
                return $(this).text(); // 선택된 행의 데이터를 배열로 가져옵니다.
            }).get();

            // 출하 이력 테이블에 행 추가
            $('#example2').find('tbody').append('<tr>' +
                '<td>' + rowData[1] + '</td>' +
                '<td>' + rowData[2] + '</td>' +
                '<td>' + rowData[3] + '</td>' +
                '<td>' + rowData[4] + '</td>' +
                '<td>' + rowData[5] + '</td>' +
                '<td>' + rowData[6] + '</td>' +
                '<td>' + new Date().toLocaleDateString() + '</td>' +
                '</tr>');

            // 선택된 행 삭제
            $row.remove();
        });
    });
</script>

</body>

</html>
